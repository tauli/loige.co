{"data":{"site":{"siteMetadata":{"title":"Luciano Mammino \"Loige\" - Web developer, entrepreneur, fighter, butterfly maker!","author":"Luciano Mammino","siteUrl":"https://loige.co/","twitterProfile":"loige","disqusShortName":"loige"}},"markdownRemark":{"id":"b317f480-9f34-52f1-a657-ec15b50333dd","timeToRead":7,"headings":[{"value":"Premise","depth":2},{"value":"Installing Gulp","depth":2},{"value":"Preparing the project","depth":2},{"value":"The gulpfile","depth":2},{"value":"Running the commands","depth":2},{"value":"Conclusions","depth":2}],"html":"<p>In this post I will explain you how to use <a href=\"http://gulpjs.com/\">Gulp</a> to interact with the files on your server through FTP. You will learn how to watch the files you are editing on your local machine and automatically synchronize them with your server as they change and how to setup a task to launch an FTP deploy on demand.</p>\n<h2 id=\"premise\"><a href=\"#premise\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Premise</h2>\n<p>Few days ago I was assigned to take care of updating few sections on <strong>a legacy website which development environment is currently accessible only through FTP</strong>. So no local virtualized development environment, no Git, no automated deploy, only old-school “FTP live edit and test”!</p>\n<p>I would have used an FTP desktop app to create a virtual drive to allow me to edit files easily and open the full project in Sublime, but I couldn’t find any good one for the last version of OS X (El Capitan), so I decided to work out a simple solution by myself using Gulp.</p>\n<p>If you ever had a similar situation or if you just want to have a simple and fast command line solution to edit a website you can access to only through FTP, keep reading, this post is for you!</p>\n<p><strong>NOTE</strong>: I just want to stress on the fact that this solution must not be considered a best practice for development and deploy, but only a useful trick in case you have to deal with a very basic setup, especially if you are not in control of the development and deployment environments.</p>\n<h2 id=\"installing-gulp\"><a href=\"#installing-gulp\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installing Gulp</h2>\n<p>In case you don’t know it, Gulp is a very popular build system written in Node.js. It uses streams, so it’s quite efficient in dealing with data transformations and in managing streams of data from different sources.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 388px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.76288659793815%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAByUlEQVQoz5VT20pbURA9f1hfrC8qtEJE6w0q+OaDQaWFBhQEEYRACLXQpxAQ0fgDxkTMxabkIkTNgwFJcvYtiVnO7MSD9+jDYm/2nFmz1swcxxgDrTW0UtBSwHQ60P/OoK8uYdptG+Nv3gvHJjSbMLe3MAARXUEdHnhEHya0Sa4L/T8HdZKE/B2GTiY8dW/hpYIOq1LxIwjfV4iZCYj5OYhvPluAY81eQpsKNNkJ3Vut1qvqLaFOnXaJpsYhxkYt9Pk59RNw63VLVC6XUavVoKjX1Wr1kcKHih3un765gdzeglzxQ64HIDc3YK6v0aDk9bU1RCIRBAIBhEIhxGIxBINBFItFdGiAXOBeHZN2CRsNyOA25K+fkOEQ5N8/MNRXRR9Eo1HkcjlkMhkkEgmkUinE43HUe8qfW2ZCsiIWvsMdGYL7ZRhiadFOXRApK2G7+XwepVLJO7PZLNLpNAqFgi1SqVRsbx3eP949uROGmJ2EmJ6A2tu1AzEUc4mU1XD/+Hx4b5Cz+zcpZU8hX3jS+3twPw/AHfxEa3Pc3clef9haP3g9tH8I2VO0JmLVD/FjGfqibN9srM8uPoXDvi3IdotUWRCZ9/5B3AGTLnyc8Y19UQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/gulp-is-the-streaming-web-build-system-8b1da56b9f291791161081b7c15d438d-f89f8.webp 256w,\n/static/gulp-is-the-streaming-web-build-system-8b1da56b9f291791161081b7c15d438d-ed505.webp 388w\"\n          sizes=\"(max-width: 388px) 100vw, 388px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/gulp-is-the-streaming-web-build-system-8b1da56b9f291791161081b7c15d438d-aaaf4.png 256w,\n/static/gulp-is-the-streaming-web-build-system-8b1da56b9f291791161081b7c15d438d-b182c.png 388w\"\n          sizes=\"(max-width: 388px) 100vw, 388px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/gulp-is-the-streaming-web-build-system-8b1da56b9f291791161081b7c15d438d-b182c.png\"\n          alt=\"Gulp is a very popular stream-based build system written in Node.js\"\n          title=\"\"\n          src=\"/static/gulp-is-the-streaming-web-build-system-8b1da56b9f291791161081b7c15d438d-b182c.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  </p>\n<p>To be able to run the script we are going to write you need to have Node.js and Gulp installed in your machine. If you don’t have Gulp already you can easily install it with NPM:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gulp</code></pre>\n      </div>\n<h2 id=\"preparing-the-project\"><a href=\"#preparing-the-project\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Preparing the project</h2>\n<p>You will need to have a copy of the full project on your local machine, so if you don’t have it already you need to login to your server and download a copy of the source files. You can use any FTP software to do so, but if you are on a Mac there’s a quick trick that allows you to avoid to install any additional software: you can simply open finder and press <code class=\"language-text\">⌘</code> + <code class=\"language-text\">k</code> to start the <strong>connect to server</strong> window and specify the FTP url of your project with the following syntax: <code class=\"language-text\">ftp://username:password@host:port/path</code>. This will allow you to see and copy all the files from your project and, in case you are wondering, this is a read-only access!</p>\n<p>Once you copied all the files you have to initialize NPM on the copied project with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init</code></pre>\n      </div>\n<p>Follow the on screen instructions and provide all the missing informations.</p>\n<p>Then you need to install Gulp also as a local dependency:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev gulp</code></pre>\n      </div>\n<p>Also we are going to use a couple of external libraries, so let’s install them as well:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev gulp-util vinyl-ftp</code></pre>\n      </div>\n<p><a href=\"https://www.npmjs.com/package/gulp-util\">gulp-util</a> is a module that offers a series of utilities functions for gulp (we will mainly use the log related functions) and <a href=\"https://www.npmjs.com/package/vinyl-ftp\">vinyl-ftp</a> is an FTP library that allows you to access FTP files and folders as streams and it’s a perfect match for Gulp.</p>\n<p>Ok, now the last step before moving to some code is to initialize a new gulp project. To do so just run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">gulp init</code></pre>\n      </div>\n<p>It will create a new <code class=\"language-text\">gulpfile.js</code> file, let’s finally jump to some code.</p>\n<h2 id=\"the-gulpfile\"><a href=\"#the-gulpfile\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The gulpfile</h2>\n<p>We are going to implement two different Gulp commands: <code class=\"language-text\">ftp-deploy</code> and <code class=\"language-text\">ftp-deploy-watch</code>. The first one allows us to deploy all the local changes to the server, the second one instead activates a live watch that constantly monitors our files and uploads immediately any change to the files, very useful when you want to live-code against a development server.</p>\n<p>To enable these two commands you need to copy paste the following code inside your <code class=\"language-text\">gulpfile.js</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> gulp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> gutil <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'gulp-util'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> ftp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'vinyl-ftp'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/** Configuration **/</span>\n<span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">FTP_USER</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> password <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">FTP_PWD</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> host <span class=\"token operator\">=</span> <span class=\"token string\">'your hostname or ip address'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> port <span class=\"token operator\">=</span> <span class=\"token number\">21</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> localFilesGlob <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./**/*'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> remoteFolder <span class=\"token operator\">=</span> <span class=\"token string\">'/myApp'</span>\n\n\n<span class=\"token comment\">// helper function to build an FTP connection based on our configuration</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getFtpConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> ftp<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        host<span class=\"token punctuation\">:</span> host<span class=\"token punctuation\">,</span>\n        port<span class=\"token punctuation\">:</span> port<span class=\"token punctuation\">,</span>\n        user<span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">,</span>\n        password<span class=\"token punctuation\">:</span> password<span class=\"token punctuation\">,</span>\n        parallel<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        log<span class=\"token punctuation\">:</span> gutil<span class=\"token punctuation\">.</span>log\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Deploy task.\n * Copies the new files to the server\n *\n * Usage: `FTP_USER=someuser FTP_PWD=somepwd gulp ftp-deploy`\n */</span>\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ftp-deploy'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> conn <span class=\"token operator\">=</span> <span class=\"token function\">getFtpConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span>localFilesGlob<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> base<span class=\"token punctuation\">:</span> <span class=\"token string\">'.'</span><span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">newer</span><span class=\"token punctuation\">(</span> remoteFolder <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// only upload newer files</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span> remoteFolder <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Watch deploy task.\n * Watches the local copy for changes and copies the new files to the server whenever an update is detected\n *\n * Usage: `FTP_USER=someuser FTP_PWD=somepwd gulp ftp-deploy-watch`\n */</span>\ngulp<span class=\"token punctuation\">.</span><span class=\"token function\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ftp-deploy-watch'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> conn <span class=\"token operator\">=</span> <span class=\"token function\">getFtpConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    gulp<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>localFilesGlob<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Changes detected! Uploading file \"'</span> <span class=\"token operator\">+</span> event<span class=\"token punctuation\">.</span>path <span class=\"token operator\">+</span> <span class=\"token string\">'\", '</span> <span class=\"token operator\">+</span> event<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token function\">src</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span>event<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> base<span class=\"token punctuation\">:</span> <span class=\"token string\">'.'</span><span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">newer</span><span class=\"token punctuation\">(</span> remoteFolder <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// only upload newer files</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span> conn<span class=\"token punctuation\">.</span><span class=\"token function\">dest</span><span class=\"token punctuation\">(</span> remoteFolder <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>The Gulp script is very simple and pretty self-descriptive, but let’s try to have a look at it in greater detail.</p>\n<p>After importing our modules, we have a series of configuration variables. The ones you have to set are <code class=\"language-text\">host</code>, <code class=\"language-text\">port</code>, <code class=\"language-text\">localFilesGlob</code> and <code class=\"language-text\">remoteFolder</code>.</p>\n<ul>\n<li><code class=\"language-text\">host</code> is the hostname or the IP address of your FTP server (e.g. <code class=\"language-text\">myserver.com</code> or <code class=\"language-text\">123.124.125.126</code>)</li>\n<li><code class=\"language-text\">port</code> is the port where your FTP server is listening (generally it’s the default: <code class=\"language-text\">21</code>)</li>\n<li><code class=\"language-text\">localFilesGlob</code> is an array containing one or more <a href=\"https://www.npmjs.com/package/glob\">glob</a> expressions. These expressions are used to determine which files from your local copy should be watched and deployed into the server. The default option is very “open”, it will copy all the files in your project folder. Most of the time it’s better to be more specific so, be sure to build your own custom array of glob to avoid copying unnecessary or sensible data.</li>\n<li><code class=\"language-text\">remoteFolder</code> is the folder in your remote server that contains the whole project (where the new files will be copied).</li>\n</ul>\n<p>As you probably noticed we also have the <code class=\"language-text\">username</code> and <code class=\"language-text\">password</code> variables mapped to an environment variable. Is generally a good idea to not write passwords in configuration files, especially if you are going to publish this file somewhere. With this approach we can also share the same gulpfile with other people in the team and allow everyone to use their personal credentials.</p>\n<p>After the configuration variables block we have the <code class=\"language-text\">getFtpConnection</code> function. This function is used as an helper to build an FTP connection using the previously specified options. You can also add some <a href=\"https://www.npmjs.com/package/vinyl-ftp#ftp-create-config\">additional options</a>, for instance <code class=\"language-text\">parallel</code> allows you to define the maximum number of files to upload in parallel.</p>\n<p>At the end we have our two real Gulp commands: <code class=\"language-text\">ftp-deploy</code> and <code class=\"language-text\">ftp-deploy-watch</code>.</p>\n<p>They simply defines a stream starting from the glob expressions and pipe it to the destination server through the FTP connection. The only difference between the two commands is that in the <code class=\"language-text\">ftp-deploy</code> we read all the files from the glob expressions and send them through the connection, in the second case we watch the files and send only the one that changes while command is running.</p>\n<p>It’s also worth noticing that we are piping the files through the function <code class=\"language-text\">conn.newer</code>. This function ensures that only the files that are different from the server gets overwritten.</p>\n<h2 id=\"running-the-commands\"><a href=\"#running-the-commands\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Running the commands</h2>\n<p>To run the commands you must first specify the <code class=\"language-text\">FTP_USER</code> and <code class=\"language-text\">FTP_PWD</code> environment variables. For example you can do it this way:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">FTP_USER<span class=\"token operator\">=</span>someuser FTP_PWD<span class=\"token operator\">=</span>somepwd gulp ftp-deploy</code></pre>\n      </div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">FTP_USER<span class=\"token operator\">=</span>someuser FTP_PWD<span class=\"token operator\">=</span>somepwd gulp ftp-deploy-watch</code></pre>\n      </div>\n<p>Or if you prefer you can export the variables in your <code class=\"language-text\">.bashrc</code> or <code class=\"language-text\">.bash_profile</code> files (in this case I suggest you to rename the variables into something more specific to avoid collisions).</p>\n<h2 id=\"conclusions\"><a href=\"#conclusions\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusions</h2>\n<p>This approach allowed me to solve the problem easily and quickly having a mechanism that is quite fast to use and easy to maintain.</p>\n<p>I am also more and more impressed about how easy is to have simple but effective solutions up and running with Node.js and the tools in its ecosystem. I am also impressed by the versatility of Gulp and how its stream-based approach makes things very concise and uniform.</p>\n<p>I hope this article was useful and interesting for you.\nI’d really love to receive <strong>your opinions in the comments box</strong> about it and, in case you are a veteran Gulp user, I’m curious to know <strong>what was the most interesting command you have ever written using Gulp</strong>.</p>\n<p>Until next time!</p>\n<p>Regards</p>","frontmatter":{"title":"Gulp and FTP: update a website \"on the fly\"","slug":"gulp-and-ftp-update-a-website-on-the-fly","author":"Luciano Mammino","tags":["gulp","javascript","ftp","server"],"date":"October 25, 2015","header_img":{"publicURL":"/static/gulp-and-ftp-update-a-website-on-the-fly-1-e802b3225a17eedc9fbfa6c39d4bd4ae.png"}}}},"pageContext":{"tags":["gulp","javascript","ftp","server"],"slug":"gulp-and-ftp-update-a-website-on-the-fly","previous":{"timeToRead":3,"excerpt":"A couple of days ago I had the need to store the MongoDB connection string for a Node.js application I am currently building.\nOf course it was not a big deal and at first I stored it in a file.\nAnyway at some point I realised that I would needed to override parts of this string to change some settings in  production  (e.g. adding replicas and authentication settings).\nFor this sake it would have been nice to have a way to store this configuration as a “well organised” object and then override just the…","fields":{"slug":"introducing-mongo-uri-builder-a-nodejs-module-to-easily-create-mongodb-connection-strings-using-objects"},"frontmatter":{"date":"29 September, 2015","title":"Introducing mongo-uri-builder, a Node.js module to easily create mongodb connection strings using objects","tags":["node-js","library","mongodb","github"],"header_img":{"publicURL":"/static/mongo-uri-builder-article-sample-image-2631a85bd72a9afcb89633ddc1e4af8d.jpg"}}},"next":{"timeToRead":4,"excerpt":"Gulp-cozy  is an experimental NPM package that allows you to organize your Gulp tasks in a more modular way with simplicity and  “cozyness”  in mind. Rationale Ever found yourself digging into a gigantic monstrous   with hundreds\nof functions and tasks scattered all around? If it happened to you I am sure you can tell that it’s not a great feeling… That’s the reason why I created this small module as an attempt to help with keeping yourself cozier (and happier!) when working with Gulp.\nIn a way it tries to…","fields":{"slug":"introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way"},"frontmatter":{"date":"18 January, 2016","title":"Introducing Gulp cozy - Manage your gulp tasks in a cozier way","tags":["gulp","javascript","node-js","library"],"header_img":{"publicURL":"/static/meerkat-459171_1920-789f6253df634fd764a674d28a284ee3.jpg"}}},"similar":[{"slug":"introducing-gulp-cozy-manage-your-gulp-tasks-in-a-cozier-way","title":"Introducing Gulp cozy - Manage your gulp tasks in a cozier way","publishedAt":"18 January, 2016","score":2},{"slug":"versioning-and-deploying-a-static-website-with-git-flightplan-and-nginx","title":"Versioning and deploying a static website with Git, Flightplan and Nginx","publishedAt":"08 September, 2015","score":2},{"slug":"my-serverless-talk-at-shift-conference-in-split","title":"My Serverless talk at Shift conference in Split","publishedAt":"15 June, 2017","score":1},{"slug":"my-universal-javascript-web-applications-talk-at-codemotion-rome-2017","title":"My Universal JavaScript Web Applications talk at Codemotion Rome 2017","publishedAt":"11 April, 2017","score":1},{"slug":"unshorten-expand-short-urls-with-node-js","title":"Unshorten (expand) short URLs with Node.js","publishedAt":"31 March, 2017","score":1}]}}
{"data":{"site":{"siteMetadata":{"title":"Luciano Mammino \"Loige\" - Web developer, entrepreneur, fighter, butterfly maker!","author":"Luciano Mammino","siteUrl":"https://loige.co/","twitterProfile":"loige","disqusShortName":"loige"}},"markdownRemark":{"id":"46fcd017-083e-5bf5-bf60-a6b08670e494","excerpt":"I recently developed a small command line app that allows you to download an entire gallery from Flickr, it‚Äôs called   and you can find it‚Ä¶","timeToRead":4,"headings":[{"value":"Why?","depth":2},{"value":"How it‚Äôs built?","depth":2},{"value":"Going asynchronous and execute requests in parallel","depth":2},{"value":"How to use it?","depth":2},{"value":"Current status","depth":2},{"value":"Opinions","depth":2}],"html":"<p>I recently developed a small command line app that allows you to download an entire gallery from Flickr, it‚Äôs called <code class=\"language-text\">flickr-set-get</code> and you can find it on <a href=\"https://www.npmjs.com/package/flickr-set-get\">NPM</a> and <a href=\"https://github.com/lmammino/flickr-set-get\">GitHub</a>.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 798px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 84.3358395989975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACxklEQVQ4y6WU208TQRSHm8hlu2333u622wulW3rZ7Q1oK9jS4o2CEtHom0JbMLWA7xqFxBj/AIH4IBr/0/k5swXBaEzAhy9n5szuNzvn7K7n+cc3ODw9wcHpMTn4doz3p0dg0R1//Yx3lNH86Nfa4fcTHJ5HCst9+PEFm5/ewvN4t0t6g03SHfQw2BuS3df7GOwOMdzfwysau9s9vOhuYbPXddnq99F/uYNtSv8S2zs72Bj24Smv3SZm2iTBRBiyHoQcCkLUVIhBFVJIo1GDoCoQaE7QFBe/IoMT/JgM+Fy8YgBj3CRydxvwVDc6yNkOmsttFGbLmJqxYOVzyBYczNg5hOMxaBEDQXO0oWKE3Mgk5/CyiAmeg3O/Bc/8oxUUKxUsLDWIUymjUq+i3lhEeX4W+VIB+XIRGSePNN3EqZRg5TLIFh26xvI2bLrOrpvJZlGlLk99Y5WU5krErhSRKxRItb6IGsXKZJHO5al4Hsm0hUQ65coS1jSSmfTZPIspGo14FJqho7i6TI/8pE3MWoBEb+kIz2mINXTEmwbMagiRooHYXARqVoZsiZAsAWJMhJqmtUwKkKcliDT64jw4cxyF9SV4ak9bJHyTI0ZNg15RYbYVl8iChugClS8ZMEpBmLYJw6b1MzUoug41rLv1ZLD6iqqMwkprJIze8ZLwmgCzI5HEmopYR0V8VUPygY7UuoHIogZzloorQQSLirtBKEcbZI7eCiYP0MY4TFh+2CJCykvkFHv8APFH/XAx/fCFGT7wCu2m4gevBuDTAu7czUlnnZYE2mUv7TI9Mmv1BMeDFyXwgvhXfNIF/KWxTz5DkTDp40dCem7C+XnCkqMLhKvBxIr4m9CdXAivwb+EPK3HVfhT2GmDo9+jn7bdlV4Ddi9zuK+Nfa+JG+NjoHWku3ivBbuXOWz2c2h0n9FB033c/4HJmOsneCru79Pb4e4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-19302.webp 256w,\n/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-4e6a7.webp 512w,\n/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-ff87d.webp 798w\"\n          sizes=\"(max-width: 798px) 100vw, 798px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-0e304.png 256w,\n/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-f5b99.png 512w,\n/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-e90e9.png 798w\"\n          sizes=\"(max-width: 798px) 100vw, 798px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-e90e9.png\"\n          alt=\"a screenshoot of flickr-set-get\"\n          title=\"\"\n          src=\"/static/687474703a2f2f692e696d6775722e636f6d2f4447457059746c2e706e67-4ee58e47806338d1112978c36551b645-e90e9.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  </p>\n<h2 id=\"why\"><a href=\"#why\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why?</h2>\n<p>To be honest I had myself the need to download a large set of photos (more than 400 photos) from Flickr and I didn‚Äôt wanted to do it manually. I also wasn‚Äôt able, after a quick search, to find something simple to solve this task. Given that I am currently getting into deep of Node.js this was the perfect chance to develop something practical.</p>\n<h2 id=\"how-its-built\"><a href=\"#how-its-built\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How it‚Äôs built?</h2>\n<p>As I said it‚Äôs built using Node.js. As part of my learning process, I tried to not reinvent the wheel and to follow ‚Äù<a href=\"http://thenodeway.io\">the Node way</a>‚Äù so I used some very good modules as the foundation to build this app:</p>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/commander\">Commander</a>, <a href=\"https://www.npmjs.com/package/cli\">Cli</a> and <a href=\"https://www.npmjs.com/package/prompt\">Prompt</a> for the command line facilities (Options/Arguments parsing, help generation, progress bar, receiving input from the user)</li>\n<li><a href=\"https://www.npmjs.com/package/request\">Request</a>: to simplify the creation of the Http request to call the Flickr APIs</li>\n<li><a href=\"https://www.npmjs.com/package/async\">Async</a>: to manage all the asynchronous tasks in parallel and with a configurable level of concurrency (one of the features that in my humble opinion makes node/javascript stand out from the crowd of the interpreted programming languages).</li>\n</ul>\n<p>As development tools I also used:</p>\n<ul>\n<li><a href=\"http://jscs.info\">JSCS</a>: to check the code standard I adopted</li>\n<li><a href=\"http://mochajs.org\">Mocha</a> and <a href=\"http://chaijs.com/\">Chai</a>: test runner and assertion frameworks for the unit testing</li>\n<li><a href=\"https://www.npmjs.com/package/nock\">Nock</a>: amazing module to ‚Äúmock‚Äù the Http requests and avoid to hit Flickr servers in my tests</li>\n<li><a href=\"https://gotwarlost.github.io/istanbul\">Istanbul</a>: for the code coverage</li>\n<li><a href=\"https://travis-ci.org\">Travis CI</a>: continous integration service</li>\n<li><a href=\"https://coveralls.io\">Coveralls</a>: service to keep track of the coverage changes after every new commit</li>\n<li><a href=\"https://gemnasium.com\">Gemnasium</a>: service that checks your dependencies and alerts you if they get out of date</li>\n</ul>\n<h2 id=\"going-asynchronous-and-execute-requests-in-parallel\"><a href=\"#going-asynchronous-and-execute-requests-in-parallel\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Going asynchronous and execute requests in parallel</h2>\n<p>To download a photo from Flickr, starting from a gallery, you need to make several API calls before you have the right URL to download the photo.</p>\n<p>First of all you need to call the <a href=\"https://www.flickr.com/services/api/flickr.photosets.getPhotos.html\">flickr.photosets.getPhotos</a> API method to find out the IDs of all the photos in the set.\nThen, to find out the URL of every photo you need to call the <a href=\"https://www.flickr.com/services/api/flickr.photos.getSizes.html\">flickr.photos.getSizes</a> API method. This method gives you all the URLs to download all the different sizes of a given photo. Once you got the URL you can simply use that to download a photo into your local drive.\nThe first API call is the starting point and then, since you now have all the IDs, you can make all the other requests in parallel.\nThanks to <code class=\"language-text\">Async</code> it was very easy to create a <code class=\"language-text\">task</code> function that figured out the specific URL of a given photo and then downloads it into a file. Then I just needed to replicate this task for every photo and run all of them in parallel. Thanks to the <code class=\"language-text\">Async.parallelLimit()</code> function it‚Äôs even possible to run the tasks with a configurable concurrency level.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 700px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA7klEQVQoz42R4XKCMBCEef/nqzqdiqBOhTJaQYEkJLl1Q7BK64+G+ebIzeRmdy8REfwGmCoxTpBeBR93LpHPTnA20539NflSggQvjniBd7EaK9jxcd4Ktm2sgbIXNGbeP+owkEK8OOJHrHUjg7U/A/N2TkYOHFjreb8KCguTYauW2KnVSN4vkHVvOOgUzXDEQKWbydKdYHNP1d86/q+nOMow8GwrFDpDqXMUasNsUtYMld6jtxcqxPg42Hmmpt1uEJxMvJ/IdXiRId3D21jhAWWjlf+e5M+W+Xlm57hdcXHL77S1bB4s6scSnvsh1xvULh6wT6P9XwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-815ba.webp 256w,\n/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-85397.webp 512w,\n/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-21246.webp 700w\"\n          sizes=\"(max-width: 700px) 100vw, 700px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-d3396.png 256w,\n/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-a37e5.png 512w,\n/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-a3ccc.png 700w\"\n          sizes=\"(max-width: 700px) 100vw, 700px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-a3ccc.png\"\n          alt=\"flickr-set-get asynchronous requests diagram\"\n          title=\"\"\n          src=\"/static/flickr-set-get-requests-diagram-e5247b5d925b3866cef9149134ee2664-a3ccc.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  </p>\n<p>You can find out how I implemented this specific logic on GitHub: <a href=\"https://github.com/lmammino/flickr-set-get/blob/ecaf0d8bea5791cf24c4b71791a7eb1fd2e60bcb/lib/Flickr.js#L212-L253\">https://github.com/lmammino/flickr-set-get/blob/ecaf0d8bea5791cf24c4b71791a7eb1fd2e60bcb/lib/Flickr.js#L212-L253</a>.</p>\n<h2 id=\"how-to-use-it\"><a href=\"#how-to-use-it\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use it?</h2>\n<p>If you‚Äôre interested on using it I suggest you to read the <a href=\"https://github.com/lmammino/flickr-set-get\">official documentation on GitHub</a>, but it should be quite easy to understand and use it if you are a developer (and it‚Äôs not meant to be used by other people who are comfortable with the command line!)</p>\n<h2 id=\"current-status\"><a href=\"#current-status\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Current status</h2>\n<p>The project has been developed in a weekend as a ‚Äúlearning project‚Äù and tested just by me on few Flickr galleries. It‚Äôs to be considered ALPHA quality and I expect it to be fully of bugs and uncovered edge cases.\nIt‚Äôs a small side project anyway so I don‚Äôt expect to put so much effort on it again unless it gets adopted by a relevant number of people (which, quite frankly, is really unlikely to happen).\nBeing an open source project I obviously tried to put in place all the basic infrastructure (tests, code standards, repository, versioning, etc.) to make it easy for other people to work on improving it. Again, more precise informations are included in the <a href=\"https://github.com/lmammino/flickr-set-get\">official documentation</a>.</p>\n<h2 id=\"opinions\"><a href=\"#opinions\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Opinions</h2>\n<p>For me it has been a really good learning experience, especially considering the fact that it was a good scenario to use asynchronous code dealing with several parallel Http requests.\nAs I still consider it a learning experience I would really love you (probably more experienced than me with Node.js) to give some opinions, critics, new ideas.\nI offer the comment box below for this sake‚Ä¶ please don‚Äôt be too much indulgent :D</p>","frontmatter":{"title":"Introducing flickr-set-get a command line app to download photos","meta_description":"","slug":"introducing-flickr-set-get-a-command-line-app-to-download-photos","author":"Luciano Mammino","tags":["javascript","http","node-js","api","flickr"],"date":"May 11, 2015","dateISO":"2015-05-11T23:04:50.000Z","header_img":{"publicURL":"/static/flickr-set-get-download-photos-from-command-line-flickr-56435f04f3c8b820b76276af7e4eee2d.jpg"},"fb_img":{"publicURL":"/static/introducing-flickr-set-get-a-command-line-app-to-download-photos-fb-3fe38959589e124a242b20dffc6f6763.png"},"tw_img":{"publicURL":"/static/introducing-flickr-set-get-a-command-line-app-to-download-photos-tw-19ee74c8dc10c9a9fce6e0a88a24497d.png"}}}},"pageContext":{"tags":["javascript","http","node-js","api","flickr"],"slug":"introducing-flickr-set-get-a-command-line-app-to-download-photos","previous":{"timeToRead":10,"excerpt":"Lumen  is a new  Php  micro-framework developed by  Taylor Otwell , the same author of the famous  Laravel  framework. I wanted to give it a try and I am here to share my experimentations. I am not an expert of Lumen (yet), but I think one of the best characteristics of this framework is that it makes really really easy to bootstrap a new project.\nSo to prove this, we will now build a fully functional app backed by a MySql database in less than 30 minutes. Are you ready to start? A motivational quote‚Ä¶","fields":{"slug":"developing-a-web-application-with-lumen-and-mysql"},"frontmatter":{"date":"18 April, 2015","title":"Developing a web application with Lumen and MySql","tags":["php","mysql","lumen","laravel"],"header_img":{"publicURL":"/static/developing-a-web-application-with-lumen-de4e7c62eaaa7504bae0f67a967ee639.jpg"}}},"next":{"timeToRead":3,"excerpt":"Hello dear developers,\ntoday I finally got my invitation to access the private beta of  Keybase.io ! üòé üéâ\nFor those who are not aware of this new service, Keybase.io is a website and a command line application that makes easier to adopt asymmetric cryptography to encrypt and authenticate messages. But it‚Äôs not just this, it‚Äôs also a  ‚Äúdirectory of people‚Äù , as they like to say. It‚Äôs like a social network, where everyone can easily share its public key and attach it to its social profiles (like Twitter‚Ä¶","fields":{"slug":"8-invitations-to-try-keybase-io"},"frontmatter":{"date":"26 May, 2015","title":"8 invitations to try Keybase.io","tags":["security","cryptography"],"header_img":{"publicURL":"/static/8-invitations-to-try-keybase-io-f86f086dfbd40709f8691bf576ea501a.jpg"}}},"similar":[{"slug":"my-serverless-talk-at-shift-conference-in-split","title":"My Serverless talk at Shift conference in Split","publishedAt":"15 June, 2017","score":2},{"slug":"my-universal-javascript-web-applications-talk-at-codemotion-rome-2017","title":"My Universal JavaScript Web Applications talk at Codemotion Rome 2017","publishedAt":"11 April, 2017","score":2},{"slug":"unshorten-expand-short-urls-with-node-js","title":"Unshorten (expand) short URLs with Node.js","publishedAt":"31 March, 2017","score":2},{"slug":"my-serverless-aws-lambda-talk-at-nodejs-dublin-january-2017","title":"My Serverless & AWS Lambda talk at Node.js Dublin January 2017","publishedAt":"14 February, 2017","score":2},{"slug":"my-universal-javascript-web-applications-talk-at-codemotion-milan-2016-2","title":"My Universal JavaScript Web Applications talk at Codemotion Milan 2016","publishedAt":"26 November, 2016","score":2}]}}